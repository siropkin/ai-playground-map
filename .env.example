# ============================================
# SUPABASE CONFIGURATION
# ============================================
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here


# ============================================
# MAPBOX CONFIGURATION
# ============================================
NEXT_PUBLIC_MAPBOX_ACCESS_TOKEN=pk.your-mapbox-token-here


# ============================================
# GOOGLE GEMINI AI CONFIGURATION
# ============================================
# API Key: Get from https://ai.google.dev/
GEMINI_API_KEY=your-gemini-api-key-here

# Model: gemini-2.0-flash (stable, with google_search grounding)
# Rate limits: Free tier 15 RPM, Paid tier 2,000 RPM
# Alternatives: gemini-1.5-flash-latest, gemini-1.5-pro-latest
GEMINI_MODEL=gemini-2.0-flash

# Temperature: 0.0-1.0 (lower = more deterministic)
GEMINI_TEMPERATURE=0.2


# ============================================
# GOOGLE CUSTOM SEARCH API (for Images)
# ============================================
# Get from: https://console.cloud.google.com/apis/credentials
# Free tier: 100 queries/day, then $5 per 1000 queries
GOOGLE_SEARCH_CX=your-custom-search-engine-id
GOOGLE_SEARCH_API_KEY=your-google-api-key-here


# ============================================
# OPENSTREETMAP (OSM) CONFIGURATION
# ============================================
# Query timeout in seconds (default: 25s)
OSM_QUERY_TIMEOUT=25

# Maximum results per query (default: 100)
OSM_QUERY_LIMIT=100


# ============================================
# CACHE CONFIGURATION
# ============================================

# --- Cache TTL (Time To Live) ---
# How long to cache data before considering it stale

# OSM Query Cache: 24 hours (86400000 ms)
# Recommendation: 24 hours - 1 week
OSM_CACHE_TTL_MS=86400000

# AI Insights Cache: 90 days (7776000000 ms)
# Recommendation: 30-90 days
AI_INSIGHTS_CACHE_TTL_MS=7776000000

# Images Cache: 90 days (7776000000 ms)
# Recommendation: 30-90 days
IMAGES_CACHE_TTL_MS=7776000000


# --- Cache Versions (for invalidation) ---
# Increment these to invalidate ALL cached data for that layer
# Cache keys include version (e.g., "v17:N123456")
# When you change the version, old cache entries won't be found

# AI Insights Cache Version
# Increment when: Gemini prompt changes, tier logic changes, response structure changes
# Current: v1
AI_INSIGHTS_CACHE_VERSION=v1

# Images Cache Version
# Increment when: Image search logic changes, quality filters change
# Current: v1
IMAGES_CACHE_VERSION=v1

# OSM Cache Version
# Increment when: OSM query logic changes, bounds calculation changes
# Current: v1
OSM_CACHE_VERSION=v1


# --- Cache Table Names ---
# Use default names unless you need custom table naming
# AI_INSIGHTS_CACHE_TABLE_NAME=ai_insights_cache
# OSM_QUERY_CACHE_TABLE_NAME=osm_query_cache
# IMAGES_CACHE_TABLE_NAME=playground_images_cache


# ============================================
# CACHE INVALIDATION EXAMPLES
# ============================================
#
# Scenario 1: You changed the Gemini prompt to improve tier ratings
# Action: Increment AI_INSIGHTS_CACHE_VERSION from "v17-tier-fields-fixed" to "v18"
# Result: All playgrounds will be re-enriched with new AI data
#
# Scenario 2: You want to use different image sources
# Action: Increment IMAGES_CACHE_VERSION from "v1" to "v2"
# Result: All playground images will be re-fetched
#
# Scenario 3: You modified OSM query to include more tags
# Action: Increment OSM_CACHE_VERSION from "v1" to "v2"
# Result: All OSM queries will be re-executed
#
# Scenario 4: You want to invalidate ALL caches (nuclear option)
# Action: Increment all three versions
# Result: Entire cache cleared, everything re-fetched from APIs
#
# Note: Old cache entries remain in database but are never accessed
# They can be manually cleaned up by running:
# DELETE FROM ai_insights_cache WHERE cache_key NOT LIKE 'v2:%';
# DELETE FROM playground_images_cache WHERE cache_key NOT LIKE 'v2:%';
# DELETE FROM osm_query_cache WHERE cache_key NOT LIKE 'v2:%';
